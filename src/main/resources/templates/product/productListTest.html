<html xmlns:th="http://www.thymeleaf.org" >
<meta charset="UTF-8"/>
<script type="text/javascript" th:inline="javascript">
/* <![CDATA[ */
	$(document).ready(function() {
		var productsList = /*[[ ${productsList} ]]*/;
		var productsListOne = productsList.length>0 ? productsList[0] : 0;
		var pageTotCnt = productsListOne.pageTotCnt;
		document.getElementById('pageTotCnt').value = pageTotCnt;
		
		var pageStart = Number(document.getElementById('pageStart').value);
		var pageSize = Number(document.getElementById('pageSize').value);
		var pageEnd = pageStart + pageSize;
		document.getElementById('pageEnd').value = pageEnd;
		
		var pageNum = (pageTotCnt / pageSize);
// 		console.log('pageNum : ' + pageNum);
		var pagingHtml = '';
		for(var i=0; i < pageNum; i++) {
			var pageNumber = i+1;
			var pageStart = i*pageSize+1;
			var pageEnd = i*pageSize+pageSize+1;
// 			console.log('pageStart : ' + pageStart);
// 			console.log('pageEnd : ' + pageEnd);
			pagingHtml = pagingHtml + '<div class="btn btn-light btn-link" onclick="javascript:getProductsByCatPaging('+pageStart+','+pageEnd+ ')">' + pageNumber + '</div>';
		}
		document.getElementById('paging').innerHTML = pagingHtml;
	});
	function getProductsByCatPaging(pageStart,pageEnd){
		var pageId = document.getElementById('pageId').value;
		$.get('/products/category/'+pageId+'/'+pageStart+'/'+pageEnd, function (data) {
		}).done(function (data) {
			$('#proudct_content').children().remove();
            $('#proudct_content').html(data);
		}).fail(function () {
		}).always(function () {
		});
	}
/* ]]> */
</script>
	<input hidden="true" id="pageTotCnt" value></input>
	<input hidden="true" id="pageEnd" value></input>
	<div th:if="${productsList.size()>0}">
		<div id="productList" th:each="product: ${productsList}" class="col-md-3">
			<div class="card mb-4 shadow-sm">
				<img class="bd-placeholder-img card-img-top" width="100%" height="225" th:src="${product.imageUrl}">
				<div class="card-body">
					<small class="text-muted" th:text="${product.header}">new</small>
					<p class="card-text" th:text="${product.name}"></p>
					<p class="card-text" th:text="${#numbers.formatInteger(product.price,3,'COMMA')}+원"></p>
					<div class="d-flex justify-content-between align-items-center">
						<div class="btn-group">
							<button type="button" class="btn btn-sm btn-outline-secondary" th:onclick="'window.location.href = \'' + @{/product/{id}(id=${product.id})} + '\''">View</button>
							<button type="button" class="btn btn-sm btn-outline-secondary">Cart</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div th:if="${productsList.size()==0}" style="text-align:center;padding-top:40px;padding-bottom:40px;">
		<img src="/img/readyForSale.png">
	</div>
	<div id="paging" class="col-md-12" style="text-align:center;">
	</div>
</html>